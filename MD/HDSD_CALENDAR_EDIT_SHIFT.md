# H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng - Ch·ªânh s·ª≠a L·ªãch L√†m Vi·ªác Tr·ª±c Ti·∫øp tr√™n Calendar

## üéØ T√≠nh nƒÉng m·ªõi

Gi·ªù ƒë√¢y b·∫°n c√≥ th·ªÉ **ch·ªânh s·ª≠a ho·∫∑c x√≥a l·ªãch l√†m vi·ªác tr·ª±c ti·∫øp** tr√™n trang Calendar m√† kh√¥ng c·∫ßn ƒëi ƒë·∫øn trang kh√°c!

---

## üìã C√°c ch·ª©c nƒÉng ch√≠nh

### 1. **Ph√¢n c√¥ng l·ªãch h√†ng lo·∫°t** (Flow c≈© - v·∫´n ho·∫°t ƒë·ªông)
- Ch·ªçn 1 ho·∫∑c nhi·ªÅu nh√¢n vi√™n ·ªü panel b√™n tr√°i
- Click v√†o ng√†y trong Calendar
- Ch·ªçn kho·∫£ng th·ªùi gian (1 ng√†y ho·∫∑c nhi·ªÅu ng√†y)
- Ch·ªçn 1 ho·∫∑c nhi·ªÅu ca l√†m vi·ªác
- Nh·∫•n "L∆∞u ph√¢n c√¥ng h√†ng lo·∫°t"

### 2. **Ch·ªânh s·ª≠a ca l√†m vi·ªác** (M·ªöI!)
- Di chu·ªôt v√†o b·∫•t k·ª≥ ca n√†o tr√™n calendar ‚Üí th·∫•y n√∫t **X** nh·ªè ·ªü ph·∫£i
- **Click v√†o ca** (ph·∫ßn ch·ªØ) ƒë·ªÉ m·ªü modal s·ª≠a
- S·ª≠a: Gi·ªù b·∫Øt ƒë·∫ßu, gi·ªù k·∫øt th√∫c, lo·∫°i ca, ghi ch√∫
- Nh·∫•n **"üíæ L∆∞u"** ƒë·ªÉ l∆∞u ho·∫∑c **"‚ùå H·ªßy"** ƒë·ªÉ ƒë√≥ng

### 3. **X√≥a ca l√†m vi·ªác** (M·ªöI!)
**C√°ch 1 - T·ª´ modal s·ª≠a:**
- Click v√†o ca ‚Üí modal m·ªü
- Nh·∫•n **"üóëÔ∏è X√≥a"** ·ªü g√≥c tr√°i d∆∞·ªõi
- X√°c nh·∫≠n x√≥a

**C√°ch 2 - Nhanh t·ª´ calendar:**
- Di chu·ªôt v√†o ca
- Nh·∫•n n√∫t **X** nh·ªè ·ªü b√™n ph·∫£i ca
- X√°c nh·∫≠n x√≥a

---

## üé® Giao di·ªán

### Tr√™n Calendar:
```
üìÖ Ng√†y 10/12
‚îú‚îÄ Nh√¢n Vi√™n 1
‚îÇ  ‚îî‚îÄ 08:00-12:00 [‚úï]  ‚Üê Click X ƒë·ªÉ x√≥a nhanh
‚îú‚îÄ Nh√¢n Vi√™n 2
‚îÇ  ‚îî‚îÄ 13:00-17:00 [‚úï]  ‚Üê Ho·∫∑c click v√†o ca ƒë·ªÉ s·ª≠a
```

### Modal S·ª≠a Shift:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚úèÔ∏è S·ª≠a ca l√†m vi·ªác          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üë§ Nh√¢n vi√™n: [T√™n - disabled]
‚îÇ üïê Gi·ªù b·∫Øt ƒë·∫ßu: [08:00]
‚îÇ üïê Gi·ªù k·∫øt th√∫c: [12:00]
‚îÇ üìã Ca l√†m vi·ªác: [S√°ng ‚ñº]
‚îÇ üìù Ghi ch√∫: [...]
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [üóëÔ∏è X√≥a] [‚ùå H·ªßy] [üíæ L∆∞u] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üí° M·∫πo s·ª≠ d·ª•ng

### S·ª≠a nhanh nhi·ªÅu ca:
1. Click ca 1 ‚Üí s·ª≠a ‚Üí L∆∞u
2. Calendar reload t·ª± ƒë·ªông
3. Click ca 2 ‚Üí s·ª≠a ‚Üí L∆∞u
4. ... ti·∫øp t·ª•c

### X√≥a nhanh nhi·ªÅu ca:
- Di chu·ªôt v√†o ca ‚Üí nh·∫•n X
- X√°c nh·∫≠n ‚Üí x√≥a li·ªÅn

### Ph√¢n c√¥ng + S·ª≠a trong 1 l·∫ßn:
1. Ph√¢n c√¥ng h√†ng lo·∫°t cho nh√¢n vi√™n
2. N·∫øu c√≥ ca kh√¥ng ƒë√∫ng ‚Üí click s·ª≠a
3. Kh√¥ng c·∫ßn ƒëi ra ngo√†i trang

---

## ‚öôÔ∏è Backend API (cho developer)

### POST: T·∫°o ph√¢n c√¥ng h√†ng lo·∫°t
```json
{
  "action": "create_assignments",
  "assignments": [
    {
      "nhanvien_id": 123,
      "ngay": "2025-12-10",
      "gio_bat_dau": "08:00",
      "gio_ket_thuc": "12:00",
      "ca_lam": "S√°ng",
      "ghi_chu": "..."
    }
  ]
}
```

### POST: S·ª≠a ca l√†m vi·ªác
```json
{
  "action": "update_shift",
  "id": 456,
  "gio_bat_dau": "09:00",
  "gio_ket_thuc": "13:00",
  "ca_lam": "Ca S√°ng",
  "ghi_chu": "Ghi ch√∫"
}
```

### POST: X√≥a ca l√†m vi·ªác
```json
{
  "action": "delete_shift",
  "id": 456
}
```

### GET: L·∫•y th√¥ng tin ca
```
GET index.php?act=ql_lichlamviec_calendar&action=get_shift&id=456
```

---

## üîí Quy·ªÅn h·∫°n

- Ch·ªâ qu·∫£n l√Ω r·∫°p m√¨nh m·ªõi c√≥ th·ªÉ s·ª≠a/x√≥a l·ªãch c·ªßa r·∫°p ƒë√≥
- T·ª± ƒë·ªông ki·ªÉm tra quy·ªÅn t·ª´ session

---

## üìù L∆∞u √Ω

1. **Gi·ªù k·∫øt th√∫c ph·∫£i sau gi·ªù b·∫Øt ƒë·∫ßu** - H·ªá th·ªëng s·∫Ω b√°o l·ªói n·∫øu kh√¥ng
2. **Tuy·ªát ƒë·ªëi kh√¥ng s·ª≠a trong qu√° tr√¨nh x·ª≠ l√Ω** - Tungc√¥ng nh√¢n vi√™n c√≥ th·ªÉ l√†
3. **Reload calendar** sau khi s·ª≠a/x√≥a ƒë·ªÉ c·∫≠p nh·∫≠t d·ªØ li·ªáu
4. **Backup tr∆∞·ªõc khi x√≥a h√†ng lo·∫°t** - Kh√¥ng c√≥ undo!

---

## üêõ Troubleshooting

**V·∫•n ƒë·ªÅ: N√∫t X kh√¥ng hi·ªÉn th·ªã**
- Gi·∫£i ph√°p: Di chu·ªôt v√†o ca ‚Üí ph·∫£i c√≥ n√∫t X

**V·∫•n ƒë·ªÅ: Modal kh√¥ng m·ªü khi click ca**
- Gi·∫£i ph√°p: Ki·ªÉm tra console (F12) c√≥ l·ªói g√¨ kh√¥ng

**V·∫•n ƒë·ªÅ: S·ª≠a nh∆∞ng kh√¥ng l∆∞u ƒë∆∞·ª£c**
- Gi·∫£i ph√°p: Ki·ªÉm tra:
  - Quy·ªÅn h·∫°n c√≥ h·ª£p l·ªá?
  - Gi·ªù k·∫øt th√∫c > gi·ªù b·∫Øt ƒë·∫ßu?
  - K·∫øt n·ªëi m·∫°ng OK?

---

**Version**: v1.0  
**C·∫≠p nh·∫≠t**: 04/12/2025
